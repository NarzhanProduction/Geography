<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>–ë–∞—Å—Ç—ã –±–µ—Ç ‚Äî –ú–∞“õ–∞–ª–∞</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link href="https://cdn.jsdelivr.net/npm/@tailwindcss/typography@0.5.10/dist/typography.min.css" rel="stylesheet">
    <style>
        .tooltip {
            position: relative;
            cursor: pointer;
            color: #2563eb;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            background-color: #111827;
            color: #fff;
            border-radius: 8px;
            padding: 6px 10px;
            top: 120%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        img {
            max-width: 100%;
            border-radius: 8px;
            margin: 1rem 0;
        }
        .prose h1, .prose h2, .prose h3 {
          font-weight: 600;
          margin-top: 1em;
          margin-bottom: 0.5em;
        }
        .prose p {
          margin-bottom: 1em;
          line-height: 1.6;
        }
        .prose img {
          max-width: 100%;
          border-radius: 10px;
          margin: 1em 0;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900">
    <!-- –ñ–æ“ì–∞—Ä“ì—ã –ø–∞–Ω–µ–ª—å -->
    <nav class="bg-white shadow-md py-3">
        <div class="max-w-6xl mx-auto flex justify-between items-center px-4">
            <h1 class="text-xl font-semibold">üìñ –ì–µ–æ–≥—Ä–∞—Ñ–∏—è —Å–∞–π—Ç—ã</h1>
            <div class="space-x-3">
                <button id="chatbot-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                    –ß–∞—Ç–±–æ—Ç
                </button>
                <button id="login-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                    –ö—ñ—Ä—É
                </button>
                <button id="edit-btn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg hidden">
                    ”®“£–¥–µ—É
                </button>
            </div>
        </div>
    </nav>

    <!-- –ú–∞“õ–∞–ª–∞ -->
    <div class="max-w-4xl mx-auto py-10 px-4">
        <div id="article" class="prose lg:prose-xl bg-white p-6 rounded-xl shadow"></div>
    </div>

    <script>
        async function loadArticle() {
            const res = await fetch("/api/v1/article?id=1", {
                method: "GET",
                headers: { "Content-Type": "application/json" }
            });
            const data = await res.json();
            document.getElementById('article').innerHTML = data.html;
        }

        async function checkAdmin() {
            const res = await fetch('/api/v1/user', { credentials: 'include' });
            if (!res.ok) {
                console.log('Unauthorized');
                return;
            }
        
            const is_admin = await res.json();
        
            if (is_admin) {
                document.getElementById('edit-btn').classList.remove('hidden');
            }
        }



        document.getElementById('chatbot-btn').addEventListener('click', () => {
            window.location.href = '/chatbot';
        });

        document.getElementById('edit-btn').addEventListener('click', () => {
            window.location.href = '/editor/1';
        });

        document.getElementById('login-btn').addEventListener('click', () => {
            window.location.href = '/login';
        });

        loadArticle();
        checkAdmin();
    </script>
</body>
</html>
